<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rules of the Road March Madness</title>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;600;700&family=Roboto+Condensed:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:ital,wght@0,100..700;1,100..700&display=swap" rel="stylesheet">
    <style>
        :root {
            --NavyBlack: #08262C;
            --Yellow: #E8B00F;
            --White: #FFFFFF;
            --light-gray: #F5F5F5;
            --border: #bbbbbb;
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Roboto Condensed', sans-serif;
            background: var(--light-gray);
            padding: 0.1rem;
	    text-align: left;
	    display: flex; /* Establishes the flex layout model */
	    justify-content: center; /* Centers the .container horizontally */
        }
        .container {
            max-width: 100%;
            margin: 0.5;
            background: var(--White);
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0, 59, 79, 0.15);
            padding: .5rem;
        }
        header {
            text-align: center;
            margin-bottom: 0.1rem;
            background-color: var(--NavyBlack);
            border: 4px solid var(--Yellow); 
            padding: 1rem;                 
            border-radius: 10px;              
        }
        h1 {
            font-family: "Josefin Sans", sans-serif;
            font-size: 5.25rem;
            color: var(--White);
            letter-spacing: 2px;
            text-transform: uppercase;
            font-weight: 800;
            margin-bottom: 0.5rem;
        }
        .subtitle {
            font-family: "Josefin Sans", sans-serif;
            font-size: 2.75rem;
            color: var(--White);
            text-transform: uppercase;
            font-weight: 600;
   		    font-style: italic;
        }
        .controls {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-bottom: 0rem; ?=/*0.75*/
            flex-wrap: wrap;
        }
        .zoom-controls {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }
        .zoom-controls span {
            font-weight: 600;
            color: var(--NavyBlack);
            min-width: 30px;
            text-align: center;
        }
        button {
            font-family: 'Roboto Condensed', sans-serif;
            font-weight: 700;
            font-size: 0.95rem;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .btn-NavyBlack {
            background: var(--NavyBlack);
            color: white;
        }
        .btn-NavyBlack:hover {
            background: #005266;
            transform: translateY(-2px);
        }
        .btn-secondary {
            background: var(--Yellow);
            color: var(--NavyBlack);
        }
        .btn-secondary:hover {
            background: #D4A20D;
            transform: translateY(-2px);
        }
        .btn-Yellow {
            background: white;
            color: var(--NavyBlack);
            border: 2px solid var(--NavyBlack);
        }
        .btn-Yellow:hover {
            background: var(--NavyBlack);
            color: white;
        }
        .bracket-scroll {
            overflow: auto;
            padding: 0rem 0;
            position: relative;
        }
        .bracket-container {
            transform-origin: top center;
            transition: transform 0.2s ease;
            display: inline-block;
            min-width: max-content;
        }
        .bracket {
            display: flex;
            justify-content: center;
            align-items: flex-start; 
            gap: 60px;
            min-width: auto;
        }
        .bracket-half {
            display: flex;
            gap: 60px;
        }
        .bracket-half.left {
            flex-direction: row;
        }
        .bracket-half.right {
            flex-direction: row-reverse;
        }
        .finals-column {
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            padding-top: 5rem; 
        }
        .round {
            display: flex;
            flex-direction: column;
            justify-content: space-around;
        }
        .round-header {
            font-family: "Josefin Sans", sans-serif;
            font-size: 1.4rem;
            color: var(--NavyBlack);
            text-align: center;
            font-weight: 750;
            margin-bottom: 1.5rem;
            letter-spacing: 1px;
            font-style: italic;
        }
        .round-matches {
            display: flex;
            flex-direction: column;
            justify-content: space-around;
            flex: 1;
        }
        .match {
            position: relative;
            margin: 10px 0;
        }
        .match-line {
            position: relative;
        }
        .team {
            background: white;
            border: 2px solid var(--border);
            padding: 10px 15px;
            min-width: 200px;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
            font-weight: 700;
            font-size: 1.3rem;
        }
        .team:first-child {
            border-bottom: 1px solid var(--border);
            border-radius: 4px 4px 0 0;
        }
        .team:last-child {
            border-top: 1px solid var(--border);
            border-radius: 0 0 4px 4px;
        }
        .team:hover {
            border-color: var(--Yellow);
            background: #FFFEF5;
            transform: translateX(3px);
        }
        .team.winner {
            background: var(--NavyBlack);
            color: white;
            border-color: var(--NavyBlack);
            font-weight: 700;
        }
        .team.loser {
            background: var(--light-grey);
            color: #999;
            opacity: 0.6;
        }
        .team.highlighted {
            background: var(--Yellow);
            color: var(--NavyBlack);
            border-color: var(--Yellow);
            font-weight: 700;
        }
        .seed {
            display: none;
        }
        .winner .seed {
            background: var(--Yellow);
            color: var(--NavyBlack);
        }
        .match::after {
            content: '';
            position: absolute;
            left: 100%;
            top: 50%;
            width: 30px;
            height: 2px;
            background: var(--NavyBlack);
        }
        .match:nth-child(odd)::before {
            content: '';
            position: absolute;
            left: calc(100% + 30px);
            top: 50%;
            width: 2px;
            background: var(--NavyBlack);
        }
        .match:nth-child(even)::before {
            content: '';
            position: absolute;
            left: calc(100% + 30px);
            bottom: 50%;
            width: 2px;
            background: var(--NavyBlack);
        }
        .round:last-child .match::after,
        .round:last-child .match::before {
            display: none;
        }
        .round1 .match:nth-child(odd)::before { height: 58px; }
        .round1 .match:nth-child(even)::before { height: 58px; }
        .round2 .match:nth-child(odd)::before { height: 146px; }
        .round2 .match:nth-child(even)::before { height: 146px; }
        .round3 .match:nth-child(odd)::before { height: 322px; }
        .round3 .match:nth-child(even)::before { height: 322px; }
        .round4 .match:nth-child(odd)::before { height: 674px; }
        .round4 .match:nth-child(even)::before { height: 674px; }
        .round5 .match:nth-child(odd)::before { height: 1378px; }
        .round5 .match:nth-child(even)::before { height: 1378px; }
        .bracket-half.right .match::after { left: auto; right: 100%; }
        .bracket-half.right .match:nth-child(odd)::before,
        .bracket-half.right .match:nth-child(even)::before { left: auto; right: calc(100% + 30px); }
        .bracket-half.left .team:hover { transform: translateX(3px); }
        .bracket-half.right .team:hover { transform: translateX(-3px); }
        .bracket-half.left .round-header { text-align: right; }
        .bracket-half.right .round-header { text-align: left; }
        .bracket-scroll { overscroll-behavior-inline: contain; scroll-padding-inline: 24px; }
        .bracket-container { min-width: auto; transform-origin: top left; }
        .center-logo {
            display: block;
            max-width: 750px;
            height: auto;
            margin-bottom: 3rem;
        }
        .round1 .team:not(.winner):not(.loser) {
            background-color: var(--NavyBlack);
            color: white;
            border-color: var(--NavyBlack);
        }
        .round1 .team:first-child:not(.winner):not(.loser) {
            border-bottom-color: white;
        }
        .round1 .team:not(.winner):not(.loser):hover {
            background-color: #FFFEF5;
            border-color: var(--Yellow);
            color: var(--NavyBlack);
        }
        .round5 .match::after,
        .round6 .match::after,
        .round5 .match::before,
        .round6 .match::before {
            display: none;
        }

        /* === FINAL, WORKING CHAMPION MODAL === */
        .champion-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(245, 245, 245, 0.85); /* --#F5F5F5 grey with 85% opacity */
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .champion-overlay.show {
            display: flex; /* This makes the overlay visible */
        }
        .champion-display {
            text-align: center;
            padding: 2rem;
            background: var(--NavyBlack);
            border: 4px solid var(--Yellow);
            border-radius: 8px;
            animation: fadeIn 0.5s ease;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }
        .champion-display h2 {
            font-family: "Josefin Sans", sans-serif;
            font-size: 4.5rem;
            color: var(--Yellow);
            margin-bottom: 1rem;
            font-weight: 700;
            letter-spacing: 2px;
        }
        .champion-name {
            font-size: 4.0rem;
            font-weight: 700;
            color: white;
            text-transform: uppercase;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Rules of the Road March Madness</h1>
            <p class="subtitle">Who rules the Rules?</p>
        </header>
        <div class="controls">
            <!-- hide all this shit <button class="btn-NavyBlack" onclick="resetBracket()">Reset Bracket</button>
            <button class="btn-Yellow" onclick="exportBracket()">Export Data</button> 
            <div class="zoom-controls">
                <button class="btn-secondary" onclick="zoomOut()">-</button>
                <span id="zoomLevel">100%</span>
                <button class="btn-secondary" onclick="zoomIn()">+</button>
            </div> -->
        </div>
        <div class="bracket-scroll" id="bracketScroll">
            <div class="bracket-container" id="bracketContainer">
                <div class="bracket" id="bracket"></div>
            </div>
        </div>
    </div>
    <!-- The Overlay and Champion Display are now separate from the main container -->
    <div class="champion-overlay" id="championOverlay">
        <div class="champion-display" id="championDisplay">
            <h2> N72 RULES OF THE ROAD CHAMPION </h2>
            <div class="champion-name" id="championName"></div>
        </div>
    </div>
    <script>
        let players = [
            // Region 1
            "Patrick Vivian",        // 1
            "BYE",                     // 16
            "Jonathan Sodano",        // 8
            "Branden Ward",           // 9
            "Kevin Sweetman",         // 5
            "William Lyons",          // 12
            "Geoff Welch",         // 4
            "BYE",                     // 13
            "David Harland",          // 6
            "Robert Beurket",         // 11
            "Wyatt Moore",            // 3
            "BYE",                     // 14
            "Blake Fontaine",         // 7
            "Ben Severson",      // 10
            "David Kane",             // 2
            "BYE",                     // 15
            // Region 2
            "Meredith Engel",         // 1
            "BYE",                     // 16
            "Walt O'Donnell",       // 8
            "Tanner Blythe",        // 9
            "Katie Moore",            // 5
            "Jerry Tredo",           // 12
            "Gregory Christod",       // 4
            "BYE",                     // 13
            "Alexander Kavall",       // 6
            "Montraye Whaley",        // 11
            "John O'Connell",         // 3
            "BYE",                     // 14
            "Branner Astrop",         // 7
            "Gregory Holmes",         // 10
            "Ted Olson",         // 2
            "BYE",                     // 15
            // Region 3
            "Kevin Brunner",          // 1
            "BYE",                     // 16
            "Jonathon Zitt",          // 8
            "Jocelyn Addeo",          // 9
            "David Parkhurst",        // 5
            "Tim Steadman",       // 12
            "Davis Chandler",         // 4
            "BYE",                     // 13
            "Kellen Gray",            // 6
            "Robert Papili",          // 11
            "Alex Egbers",            // 3
            "BYE",                     // 14
            "Lee McDonough",          // 7
            "Daniel Urbano",          // 10
            "Seth Bradley",           // 2
            "BYE",                     // 15
            // Region 4
            "Michael Shanley",        // 1
            "BYE",                     // 16
            "Tony Kennedy",        // 8
            "Ian Johnson",            // 9
            "Phil Lapointe",        // 5
            "Michael Chesnut",        // 12
            "Gabriel Ptasienski",     // 4
            "BYE",                     // 13
            "Alexander McQuain",      // 6
            "Jacob Vehrs",            // 11
            "David Carrillo",         // 3
            "BYE",                     // 14
            "Steven Tommasello",      // 7
            "Benjamin Deforest",      // 10
            "Kat Hunter",         // 2
            "BYE"                      // 15
        ];
        const rounds = [
            { name: 'FIRST ROUND', matches: 32, class: 'round1' }, { name: 'SECOND ROUND', matches: 16, class: 'round2' }, { name: 'SWEET 16', matches: 8, class: 'round3' },
            { name: 'ELITE 8', matches: 4, class: 'round4' }, { name: 'FINAL 4', matches: 2, class: 'round5' }, { name: 'CHAMPIONSHIP', matches: 1, class: 'round6' }
        ];
        let bracketData = {};
        let zoomLevel = 1;
        
        function zoomIn() {
            zoomLevel = Math.min(zoomLevel + 0.1, 2);
            updateZoom();
        }
        function zoomOut() {
            zoomLevel = Math.max(zoomLevel - 0.1, 0.3);
            updateZoom();
        }
        function updateZoom() {
            const container = document.getElementById('bracketContainer');
            container.style.zoom = zoomLevel;
            document.getElementById('zoomLevel').textContent = Math.round(zoomLevel * 100) + '%';
        }
        function initializeBracket() {
            bracketData = {};
            const bracket = document.getElementById('bracket');
            bracket.innerHTML = '';
            const leftHalf = document.createElement('div');
            leftHalf.className = 'bracket-half left';
            const rightHalf = document.createElement('div');
            rightHalf.className = 'bracket-half right';
            for (let roundIndex = 0; roundIndex < 5; roundIndex++) {
                const round = rounds[roundIndex];
                leftHalf.appendChild(createRound(round, roundIndex, 0, round.matches / 2));
                rightHalf.appendChild(createRound(round, roundIndex, round.matches / 2, round.matches / 2));
            }
            const finalsDiv = document.createElement('div');
            finalsDiv.className = 'finals-column';
            const finalsRound = createRound(rounds[5], 5, 0, 1);
            const logo = document.createElement('img');
            logo.src = 'SWSC_logo.png';
            logo.alt = 'Bracket Logo';
            logo.className = 'center-logo';
            finalsDiv.appendChild(logo);
            finalsDiv.appendChild(finalsRound);
            bracket.appendChild(leftHalf);
            bracket.appendChild(finalsDiv);
            bracket.appendChild(rightHalf);
            attachClickHandlers();
            attachHoverHandlers();
        }
        function createRound(round, roundIndex, startMatch, matchCount) {
            const roundDiv = document.createElement('div');
            roundDiv.className = `round ${round.class}`;
            const header = document.createElement('div');
            header.className = 'round-header';
            header.textContent = round.name;
            roundDiv.appendChild(header);
            const matchesDiv = document.createElement('div');
            matchesDiv.className = 'round-matches';
            for (let i = 0; i < matchCount; i++) {
                const matchIndex = startMatch + i;
                const matchId = `r${roundIndex}-m${matchIndex}`;
                const matchDiv = document.createElement('div');
                matchDiv.className = 'match';
                matchDiv.dataset.matchId = matchId;
                if (roundIndex === 0) {
                    const p1Index = matchIndex * 2, p2Index = matchIndex * 2 + 1;
                    const seedPattern = [1, 16, 8, 9, 5, 12, 4, 13, 6, 11, 3, 14, 7, 10, 2, 15];
                    const seed1 = seedPattern[(matchIndex % 8) * 2], seed2 = seedPattern[(matchIndex % 8) * 2 + 1];
                    bracketData[matchId] = { teams: [{ name: players[p1Index], seed: seed1 }, { name: players[p2Index], seed: seed2 }], winner: null };
                    matchDiv.innerHTML = `<div class="match-line"><div class="team" data-match="${matchId}" data-team="0"><span class="seed">${seed1}</span>${players[p1Index]}</div><div class="team" data-match="${matchId}" data-team="1"><span class="seed">${seed2}</span>${players[p2Index]}</div></div>`;
                } else {
                    bracketData[matchId] = { teams: [{ name: 'TBD', seed: null }, { name: 'TBD', seed: null }], winner: null };
                    matchDiv.innerHTML = `<div class="match-line"><div class="team" data-match="${matchId}" data-team="0"><span class="seed">-</span>TBD</div><div class="team" data-match="${matchId}" data-team="1"><span class="seed">-</span>TBD</div></div>`;
                }
                matchesDiv.appendChild(matchDiv);
            }
            roundDiv.appendChild(matchesDiv);
            return roundDiv;
        }
        function attachClickHandlers() { document.querySelectorAll('.team').forEach(team => team.addEventListener('click', function() { selectWinner(this.dataset.match, parseInt(this.dataset.team)); })); }
        function attachHoverHandlers() { document.querySelectorAll('.team').forEach(team => { team.addEventListener('mouseenter', function() { const seedElement = this.querySelector('.seed'); if (seedElement) { highlightPlayer(this.textContent.trim().substring(seedElement.textContent.trim().length).trim()); } }); team.addEventListener('mouseleave', clearHighlights); }); }
        function selectWinner(matchId, teamIndex) {
            const match = bracketData[matchId];
            const selectedTeam = match.teams[teamIndex];
            if (selectedTeam.name === 'TBD' || selectedTeam.name === 'BYE') return;
            const isAlreadyDecided = match.winner !== null;
            const isWinnerClicked = isAlreadyDecided && match.winner === teamIndex;
            if (isAlreadyDecided) {
                clearFutureMatches(matchId);
            }
            if (isWinnerClicked) {
                match.winner = null;
                const matchDiv = document.querySelector(`[data-match-id="${matchId}"]`);
                matchDiv.querySelectorAll('.team').forEach(t => t.classList.remove('winner', 'loser'));
            } else {
                match.winner = teamIndex;
                const matchDiv = document.querySelector(`[data-match-id="${matchId}"]`);
                matchDiv.querySelectorAll('.team').forEach((t, idx) => {
                    t.classList.remove('winner', 'loser');
                    if (idx === teamIndex) t.classList.add('winner');
                    else t.classList.add('loser');
                });
                advanceWinner(matchId, selectedTeam);
            }
        }
        function advanceWinner(matchId, winningTeam) {
            const [roundNum, matchNum] = matchId.substring(1).split('-m').map(Number);
            if (roundNum >= rounds.length - 1) {
                showChampion(winningTeam.name);
                return;
            }
            const nextMatchId = `r${roundNum + 1}-m${Math.floor(matchNum / 2)}`;
            const position = matchNum % 2;
            bracketData[nextMatchId].teams[position] = { name: winningTeam.name, seed: winningTeam.seed };
            const nextTeamDiv = document.querySelector(`[data-match-id="${nextMatchId}"] [data-team="${position}"]`);
            nextTeamDiv.innerHTML = `<span class="seed">${winningTeam.seed || '-'}</span>${winningTeam.name}`;
        }
        function clearFutureMatches(matchId) {
            const [roundNum, matchNum] = matchId.substring(1).split('-m').map(Number);
            if (roundNum >= rounds.length - 1) {
                showChampion(null);
                return;
            }
            const nextMatchId = `r${roundNum + 1}-m${Math.floor(matchNum / 2)}`;
            const position = matchNum % 2;
            if (!bracketData[nextMatchId]) return;
            if (bracketData[nextMatchId].winner !== null) {
                clearFutureMatches(nextMatchId);
            }
            bracketData[nextMatchId].teams[position] = { name: 'TBD', seed: null };
            bracketData[nextMatchId].winner = null;
            const nextMatchDiv = document.querySelector(`[data-match-id="${nextMatchId}"]`);
            if (nextMatchDiv) {
                const teamToClear = nextMatchDiv.querySelector(`[data-team="${position}"]`);
                if (teamToClear) {
                    teamToClear.innerHTML = `<span class="seed">-</span>TBD`;
                }
                nextMatchDiv.querySelectorAll('.team').forEach(team => {
                    team.classList.remove('winner', 'loser');
                });
            }
        }
        function showChampion(name) {
            const overlay = document.getElementById('championOverlay');
            if (name) {
                document.getElementById('championName').textContent = name;
                overlay.classList.add('show');
            } else {
                overlay.classList.remove('show');
            }
        }
        function highlightPlayer(name) { if (name === 'TBD' || name === 'BYE') return; document.querySelectorAll('.team').forEach(team => { const teamName = team.textContent.trim().substring(team.querySelector('.seed').textContent.trim().length).trim(); if (teamName === name) { team.classList.add('highlighted'); } }); }
        function clearHighlights() { document.querySelectorAll('.team').forEach(team => team.classList.remove('highlighted')); }
        function resetBracket() {
            document.getElementById('championOverlay').classList.remove('show');
            initializeBracket();
        }
        function exportBracket() {
            const data = { players, bracket: bracketData, timestamp: new Date().toISOString() };
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'tournament-bracket.json';
            a.click();
            URL.revokeObjectURL(url);
        }
        
        // --- FINAL, CORRECTED INITIALIZATION LOGIC ---
        window.addEventListener('load', () => {
    		// A 100ms delay gives the browser time to render fonts after the page loads.
		    setTimeout(() => {
		        initializeBracket();
		        const scrollEl = document.getElementById('bracketScroll');
		        const container = document.getElementById('bracketContainer');
		        const contentW = container.scrollWidth;
		        const viewW = scrollEl.clientWidth;
		        if (contentW > viewW) {
		            zoomLevel = (viewW - 20) / contentW;
		        }
		        updateZoom();
		    }, 200); 
});

// --- Allows user to click overlay to close it ---
document.getElementById('championOverlay').addEventListener('click', () => {
    document.getElementById('championOverlay').classList.remove('show');
});
    </script>
</body>
</html>
